/* =========================
   ✅ UI 스케일: 모니터 크기에 따라 비율만 변화
   - 1440x900(맥북) 기준으로 잡고
   - 너무 작아지거나 커지지 않게 clamp
========================= */
:root{
  --ui-scale: clamp(0.90, min(100vw / 1440, 100vh / 900), 1.25);
  --bg: #e5e3e3;
  --fg: #231d1a;
}

/* ✅ 핵심: 전체 UI는 rem 기반이므로
   html 폰트 크기만 스케일하면
   "크기는 유지 + 비율만" 자동으로 변함 */
html{
  font-size: calc(16px * var(--ui-scale));
}

*{ box-sizing:border-box; }

html, body{
  margin:0;
  width:100%;
  height:100%;
  overflow:hidden;
  font-family:"Apple SD Gothic Neo","Noto Sans KR",sans-serif;
  background:var(--bg);
  color:var(--fg);
}

/* =========================
   ✅ 광장
========================= */
.stage{
  position:fixed;
  inset:0;
  background:var(--bg);
  z-index:0;
}
#canvas{
  position:absolute;
  inset:0;
  z-index:0;
}

/* =========================
   ✅ 패널(옵션)
   (기존 320px, 20px 위치를 rem으로 유지)
========================= */
.panel{
  position:fixed;
  left:1.25rem;  /* 20px */
  top:1.25rem;
  z-index:10;
  width:20rem;   /* 320px */
  background:var(--bg);
  border:0.125rem solid var(--fg); /* 2px */
  box-shadow:0 0.625rem 1.875rem rgba(0,0,0,0.08);
  padding:0.75rem; /* 12px */
}

.panel h1{
  font-size:1rem; /* 16px */
  margin:0 0 0.625rem 0;
}

.desc{
  font-size:0.875rem; /* 14px */
  line-height:1.4;
  border:0.125rem solid var(--fg);
  padding:0.625rem;
  background:var(--bg);
  margin-bottom:0.75rem;
  color:var(--fg);
  font-weight:600;
}

/* 드롭다운 버튼 */
.dropdown-btn{
  width:100%;
  padding:0.75rem;
  background:var(--fg);
  border:0.125rem solid var(--fg);
  font-weight:900;
  cursor:pointer;
  margin-bottom:1rem;
  color:var(--bg);
}

/* 드롭다운 바디 */
.panel-body{ display:none; }
.panel.open .panel-body{ display:block; }

.group{ margin-bottom:0.625rem; }
.group-title{
  font-weight:700;
  font-size:0.875rem; /* 14px */
  margin:0 0 0.375rem 0;
}

/* 옵션 리스트 */
.options{
  display:flex;
  gap:0.5rem; /* 8px */
  overflow-x:auto;
  padding-bottom:0.375rem;

  /* ✅ "이동바(스크롤바)" 숨기기 */
  scrollbar-width:none;           /* Firefox */
  -ms-overflow-style:none;        /* IE/Edge */
}
.options::-webkit-scrollbar{      /* Chrome/Safari */
  height:0;
  display:none;
}

/* 옵션 버튼 */
.option{
  width:2.125rem;  /* 34px */
  height:2.875rem; /* 46px */
  border:none;
  background:var(--bg);
  padding:0;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  flex:0 0 auto;

  /* ✅ 선택 테두리(inside) 잘림 방지 */
  border-radius:0.25rem;
}

.option img{
  width:100%;
  height:100%;
  object-fit:contain;
  display:block;
  pointer-events:none;
}

/* ✅ border 쓰면 안쪽이 줄어드니까
   inset shadow로 “안쪽 테두리”를 줘서 크기 변화 없이 표시 */
.option.selected{
  box-shadow: inset 0 0 0 0.125rem var(--fg); /* 2px */
}

/* 입력 */
label{
  font-size:0.9375rem; /* 15px */
  font-weight:700;
  margin-top:0.625rem;
  display:block;
}

input, textarea{
  width:100%;
  border:0.125rem solid var(--fg);
  padding:0.375rem;
  margin-top:0.25rem;
  font-size:0.75rem; /* 12px */
  outline:none;
  background:var(--bg);
}

textarea{
  height:5.625rem; /* 90px */
  resize:none;
}

/* 전송 버튼 */
.send-btn{
  width:100%;
  margin-top:0.625rem;
  padding:0.875rem 0.75rem;
  background:var(--fg);
  color:var(--bg);
  border:0.125rem solid var(--fg);
  cursor:pointer;
  font-size:1rem;
  font-weight:700;
}

/* =========================
   ✅ 프리뷰 패널 (기존 크기 유지)
========================= */
.preview-panel{
  position:fixed;
  left: calc(1.25rem + 20rem + 0.75rem); /* 20px + 320px + 12px */
  top:1.25rem;
  z-index:10;
  width:10rem; /* 160px */
  background:var(--bg);
  border:0.125rem solid var(--fg);
  box-shadow:0 0.625rem 1.875rem rgba(0,0,0,0.08);
  padding:0.75rem;
}

.preview-box{
  width:100%;
  height:16.25rem; /* ✅ 260px (작아지지 않게 원복) */
  background:var(--bg);
  position:relative;
  overflow:hidden;
}

/* 프리뷰 에셋 크기 */
:root{ --preview-size: 4.875rem; } /* 78px */

.preview-box .layer{
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  width:var(--preview-size);
  height:auto;
  display:none;
}

.preview-box .layer.flower{ top:-0.625rem; } /* -10px */
.preview-box .layer.stem{   top:4.0625rem; } /* 65px */
.preview-box .layer.pot{    top:9.375rem; }  /* 150px */

/* =========================
   ✅ 툴팁
========================= */
.tooltip{
  position:absolute;
  background:var(--bg);
  border:0.125rem solid var(--fg);
  color:var(--fg);
  padding:0.5rem 0.625rem;
  line-height:1.25;
  display:none;
  pointer-events:none;
  min-width:7.5rem;  /* 120px */
  max-width:13.75rem;/* 220px */
  z-index:20;
}
.tooltip .msg{
  font-weight:700;
  font-size:0.75rem; /* 12px */
  margin-bottom:0.25rem;
}
.tooltip .from{
  font-weight:700;
  font-size:0.625rem; /* 10px */
  opacity:0.85;
}

/* =========================
   ✅ 모달
========================= */
.modal{
  position:fixed;
  inset:0;
  z-index:999;
  display:none;
  align-items:center;
  justify-content:center;
  background:rgba(229,227,227,0.80);
  backdrop-filter: blur(2px);
}
.modal.show{ display:flex; }

.modal-card{
  width:17.5rem; /* 280px */
  background:var(--bg);
  border:0.125rem solid var(--fg);
  box-shadow:0 0.625rem 1.875rem rgba(0,0,0,0.08);
  padding:0.875rem;
}
.modal-msg{
  font-size:0.875rem; /* 14px */
  line-height:1.4;
  font-weight:700;
  background:var(--bg);
  padding:0.625rem;
}
.modal-btn{
  width:100%;
  margin-top:0.625rem;
  padding:0.75rem;
  background:var(--bg);
  border:0.125rem solid var(--fg);
  font-weight:800;
  cursor:pointer;
  font-size:0.8125rem; /* 13px */
}

/* ✅ 레이어 */
#canvas{ z-index:0; }
.panel, .preview-panel, .modal{ z-index:10; }

/* ✅ 기본은 프리뷰 숨김 */
.preview-panel { display:none; }

/* ✅ 옵션창 열렸을 때만 프리뷰 보이기 */
.panel.open + .preview-panel { display:block; }
